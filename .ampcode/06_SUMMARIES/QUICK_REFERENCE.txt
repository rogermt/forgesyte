â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘            ISSUE #146: JOB PIPELINE CLEANUP MIGRATION PACK                  â•‘
â•‘                     QUICK REFERENCE GUIDE                                   â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

STATUS: âœ‹ AWAITING APPROVAL (pre-implementation)
BRANCH: refactor/web-ui-job-pipeline-cleanup
GITHUB: https://github.com/rogermt/forgesyte/issues/146
LOCATION: /home/rogermt/forgesyte/.ampcode/

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

WHAT GETS DELETED:
  âŒ web-ui/src/components/ToolSelector.tsx
  âŒ web-ui/src/utils/detectToolType.ts
  âŒ web-ui/src/api/toolRunner.ts

WHAT GETS ADDED:
  âœ… web-ui/src/components/JobStatusIndicator.tsx
  âœ… web-ui/src/components/JobError.tsx

WHAT GETS UPDATED:
  âš™ï¸  web-ui/src/components/UploadPanel.tsx
  âš™ï¸  web-ui/src/components/ResultsPanel.tsx
  âš™ï¸  web-ui/src/components/VideoTracker.tsx (if exists)
  âš™ï¸  web-ui/src/pages/AnalyzePage.tsx (if uses ToolSelector)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

EXECUTION FLOW BEFORE (OLD):

  User selects plugin
          â†“
  ToolSelector â†’ selectedPluginId
          â†“
  User uploads file
          â†“
  runTool(toolId, file)  âŒ SYNCHRONOUS, BLOCKS UI
          â†“
  POST /v1/tools/{id}/run
          â†“
  (immediate result)
          â†“
  ResultsPanel + detectToolType branching
          â”œâ”€ OCR branch
          â”œâ”€ YOLO branch
          â””â”€ etc...

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

EXECUTION FLOW AFTER (NEW):

  Plugin dropdown (via apiClient.listPlugins())
          â†“
  User uploads file
          â†“
  apiClient.analyzeImage(file, pluginId)  âœ… NON-BLOCKING
          â†“
  POST /v1/analyze (returns job_id immediately)
          â†“
  apiClient.pollJob(job_id)
          â†“
  GET /v1/jobs/{id} (polls until done)
          â†“
  Job State Machine: queued â†’ running â†’ done â†’ error
          â†“
  [JobStatusIndicator] shows current state
  [ResultsPanel] renders job.result (generic, no branching)
  [JobError] shows errors if any

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

BEFORE YOU START (APPROVAL REQUIRED):

Read and answer these questions:

1. Plugin Selection
   â˜ A) Dropdown with apiClient.listPlugins()
   â˜ B) Keep minimal PluginSelector component
   â˜ C) Other: _________

2. Result Rendering
   â˜ A) Generic JSON display
   â˜ B) Simple card layout
   â˜ C) Keep plugin-specific renderers
   â˜ D) Other: _________

3. Video Overlay
   â˜ A) Inside VideoTracker
   â˜ B) Separate component
   â˜ C) Not implemented yet (TODO)
   â˜ D) Other: _________

4. Error Retry Button
   â˜ A) Re-process same file/frame
   â˜ B) Clear error, wait for new upload
   â˜ C) Optional (callback pattern)
   â˜ D) Other: _________

5. Testing Framework
   â˜ A) Vitest + React Testing Library (current)
   â˜ B) Jest + Enzyme
   â˜ C) Other: _________

APPROVED BY: _______________________
DATE: _______________________________

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

DOCUMENTS IN THIS PACK:

  ğŸ“„ README.md
     â””â”€ Overview, approval checklist, next steps

  ğŸ“„ WEB-UI_ISSUE_146.md
     â””â”€ Main plan, exact diffs, full component code

  ğŸ“„ ARCHITECTURE_BEFORE_AFTER.md
     â””â”€ Visual diagrams, detailed comparison, testing strategy

  ğŸ“„ MIGRATION_PLAN.md
     â””â”€ Step-by-step execution phases, test patterns

  ğŸ“„ IMPLEMENTATION_CHECKLIST.md
     â””â”€ Task-by-task checklist, troubleshooting guide
     â””â”€ USE THIS DURING CODING!

  ğŸ”§ migrate_to_job_pipeline.sh
     â””â”€ Bash script to find old code references
     â””â”€ RUN: ./.ampcode/migrate_to_job_pipeline.sh

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

TIMELINE:

  Phase 1: Preparation              15 min
  Phase 2: Delete 3 files           10 min
  Phase 3: Create 2 components      20 min
  Phase 4: Update 3-4 components    30 min
  Phase 5: Tests & verification     15 min
  Phase 6: Commit & push             5 min
  Phase 7: Create PR                 3 min
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  TOTAL:                           ~2.5 hours

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

GETTING STARTED:

  1. Read README.md (this directory)
  2. Read WEB-UI_ISSUE_146.md (full plan)
  3. Answer approval questions above
  4. Get sign-off
  5. Use IMPLEMENTATION_CHECKLIST.md during coding
  6. Run migrate_to_job_pipeline.sh to verify

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

SUCCESS CRITERIA (After implementation):

  âœ… No runTool() in codebase
  âœ… No ToolSelector imports
  âœ… No detectToolType usage
  âœ… JobStatusIndicator component exists and used
  âœ… JobError component exists and used
  âœ… UploadPanel uses new job pipeline
  âœ… ResultsPanel generic (no branching)
  âœ… VideoTracker uses job pipeline
  âœ… All tests passing
  âœ… Type-check clean
  âœ… Lint clean
  âœ… PR created and linked to #146

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

QUESTIONS? Check:

  â€¢ Plans don't match your codebase?
    â†’ Answer approval questions, request changes

  â€¢ Stuck during implementation?
    â†’ Use IMPLEMENTATION_CHECKLIST.md Troubleshooting section

  â€¢ Need to find old code?
    â†’ Run: ./.ampcode/migrate_to_job_pipeline.sh

  â€¢ Need exact code to copy?
    â†’ See WEB-UI_ISSUE_146.md section 2-4

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Last updated: Feb 1, 2026
Issue: #146
Branch: refactor/web-ui-job-pipeline-cleanup
