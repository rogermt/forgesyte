# Forbidden vocabulary for Phase 15 video batch pipeline
# Patterns use word boundaries to match whole words only
# Prevents Phase 16+ concepts from leaking into Phase 15 codebase

# ==============================================================================
# Foregsyte Phase History (for future maintainers)
# ==============================================================================
# This file enforces vocabulary and namespace rules for Phase‑16 and beyond.
# It exists because earlier phases introduced different endpoint models, and
# Phase‑16 must not regress or mix concepts from older phases.
#
# PHASE SUMMARY
# ------------------------------------------------------------------------------
# Phase 1–14: Internal architecture, pipeline foundations, CLI, governance.
#
# Phase 15: Synchronous video processing (DEPRECATED)
#   - Introduced /v1/video/submit
#   - Pipeline executed immediately, blocking request
#   - No job queue, no worker, no persistence
#   - This entire model is replaced in Phase‑16
#
# Phase 16: Asynchronous job-based processing (CURRENT)
#   - Introduced /video/submit (NO /v1 prefix)
#   - Added DuckDB job table
#   - Added worker queue + storage service
#   - Added /video/status/{job_id}
#   - Added /video/results/{job_id}
#   - All synchronous Phase‑15 endpoints are forbidden
#
# Phase 17: Real-time streaming (WebSocket)
#   - Introduced /ws/video/stream
#   - No jobs, no persistence, no /video/* endpoints
#   - Purely ephemeral, per-connection session model
#
# Phase 18: Stabilization + Pre‑Release Hardening
#   - Final cleanup of Phase‑16/17 systems
#   - CI hardening, governance tightening, documentation consolidation
#   - After Phase‑18, Foregsyte transitions to semantic versioning
#     (e.g., v1.0.0 for the first public release)
#
# POST‑PHASE‑18:
#   - Phase numbers are retired
#   - All future work uses release numbers (v1.x, v2.x, etc.)
#   - This file remains as a historical reference to prevent regressions
#
# WHY THIS FILE EXISTS
# ------------------------------------------------------------------------------
# Phase‑16 must not contain ANY Phase‑15 synchronous endpoints.
# The /v1/* namespace is deprecated and forbidden.
# This validator prevents accidental reintroduction of old patterns.
#
# ==============================================================================

patterns:
  # Phase 16: Job queue concepts
  - pattern: '\bjob_id\b'
    reason: 'Phase 16 concept (job tracking)'
  - pattern: '\bqueue\b'
    reason: 'Phase 16 concept (job queuing)'
  - pattern: '\bworker\b'
    reason: 'Phase 16 concept (distributed workers)'

  # Job queue libraries
  - pattern: '\bcelery\b'
    reason: 'Job queue library (Phase 16 only)'
  - pattern: '\brq\b'
    reason: 'RQ job queue library (Phase 16 only)'
  - pattern: '\bredis\b'
    reason: 'Redis (Phase 16 only)'
  - pattern: '\brabbitmq\b'
    reason: 'RabbitMQ (Phase 16 only)'

  # Database concepts (Phase 16+)
  - pattern: '\bdatabase\b'
    reason: 'Database persistence (Phase 16 only)'
  - pattern: '\bsql\b'
    reason: 'SQL queries (Phase 16 only)'
  - pattern: '\bpostgres\b'
    reason: 'PostgreSQL (Phase 16 only)'
  - pattern: '\bmongodb\b'
    reason: 'MongoDB (Phase 16 only)'
  - pattern: '\binsert_one\b'
    reason: 'Database operations (Phase 16 only)'
  - pattern: '\bupdate_one\b'
    reason: 'Database operations (Phase 16 only)'

  # YOLO tracker concepts (not for Phase 15 video batch)
  - pattern: '\breid\b'
    reason: 'Re-identification tracking (not in Phase 15)'
  - pattern: '\btracking\b'
    reason: 'Player tracking (not in Phase 15 scope)'
  - pattern: '\btrack_ids\b'
    reason: 'Track IDs (not in Phase 15 scope)'

  # Metrics/observability concepts (future phases)
  - pattern: '\bmetrics\b'
    reason: 'Metrics tracking (future phase)'
  - pattern: '\bexecution_time_ms\b'
    reason: 'Execution metrics (future phase)'

  # Real-time streaming (Phase 17+)
  - pattern: '\bwebsocket\b'
    reason: 'WebSocket (Phase 17 real-time only)'
  - pattern: '\bstreaming\b'
    reason: 'Streaming (Phase 17 real-time only)'

  # Phase 17+: Distributed execution concepts
  - pattern: '\bgpu_schedule\b'
    reason: 'GPU scheduling (Phase 17+ only)'
  - pattern: '\bgpu_worker\b'
    reason: 'GPU worker (Phase 17+ only)'
  - pattern: '\bdistributed\b'
    reason: 'Distributed execution (Phase 17+ only)'


  # Phase 16: Endpoint namespace governance
  # Phase‑15 endpoints (/v1/*) are forbidden in Phase‑16+
  - pattern: '/v1/video/submit'
    reason: 'Phase‑15 synchronous endpoint — forbidden in Phase‑16+'
  - pattern: '/v1/video/status'
    reason: 'Phase‑15 synchronous endpoint — forbidden in Phase‑16+'
  - pattern: '/v1/video/results'
    reason: 'Phase‑15 synchronous endpoint — forbidden in Phase‑16+'
  - pattern: '/v1/'
    reason: 'Phase‑15 namespace — forbidden in Phase‑16+'
